<meta property="og:url" content="https://developers.zalo.me/" />
<meta property="og:title" content="Zalo For Developers" />
<meta property="og:image" content="https://developers.zalo.me/web/static/prodution/zalo.png" />
<meta property="og:description" content="Trang thông tin về Zalo dành cho cộng đồng lập trình viên" />
<div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Trang chủ" class="breadcrumbs__link" href="/docs/"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tham khảo</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">User Access Token V4</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Trên trang này</button></div><div class="theme-doc-markdown markdown"><h1>User Access Token V4</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="yêu-cầu-cấp-mới-oauth-code">Yêu cầu cấp mới OAuth Code<a href="#yêu-cầu-cấp-mới-oauth-code" class="hash-link" aria-label="Đường dẫn trực tiếp tới Yêu cầu cấp mới OAuth Code" title="Đường dẫn trực tiếp tới Yêu cầu cấp mới OAuth Code">​</a></h2><p>Để sử dụng hệ thống Social API, ứng dụng của bạn cần được cấp quyền bằng cách lấy mã&nbsp;<strong>access token</strong>&nbsp;(mã truy cập) từ User. Ứng dụng cần thực hiện các bước cấu hình ban đầu để có thể lấy&nbsp;<strong>access token</strong>. Bạn có thể xem hướng dẫn cấu hình ban đầu&nbsp;bên dưới.</p><p><strong>Trước khi thực hiện các bước bên dưới, bạn cần chú ý đến <a href="/docs/v2/social-api/tham-khao/mot-so-luu-y-voi-user-access-token-v4">Một số lưu ý với User Access Token V4</a>.</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bước-1-cấu-hình-thông-tin-đăng-nhập">Bước 1: Cấu hình thông tin đăng nhập<a href="#bước-1-cấu-hình-thông-tin-đăng-nhập" class="hash-link" aria-label="Đường dẫn trực tiếp tới Bước 1: Cấu hình thông tin đăng nhập" title="Đường dẫn trực tiếp tới Bước 1: Cấu hình thông tin đăng nhập">​</a></h3><p>Callback URL là nơi bạn sẽ phải thực hiện xử lý để nhận được&nbsp;<strong>authorization code</strong>.&nbsp;Trình duyệt sẽ chuyển hướng OA admin đến địa chỉ này sau khi quá trình ủy quyền từ phía OA admin hoàn tất. Vui lòng cấu hình Callback URL tại trang Quản lý ứng dụng -&gt; mục Đăng nhập </p><img src="/docs/img/2021-09-29_12-32.png" class="custom-image"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bước-2-tạo-code-verifier-và-code-challenge">Bước 2: Tạo code verifier và code challenge<a href="#bước-2-tạo-code-verifier-và-code-challenge" class="hash-link" aria-label="Đường dẫn trực tiếp tới Bước 2: Tạo code verifier và code challenge" title="Đường dẫn trực tiếp tới Bước 2: Tạo code verifier và code challenge">​</a></h3><p>Zalo sử dụng&nbsp;<strong>code challenge</strong>&nbsp;và&nbsp;<strong>code verifier</strong>&nbsp;(theo phương thức PKCE) để tăng độ bảo mật của quá trình xác thực và ủy quyền. Xem thêm về PKCE tại&nbsp;<a href="https://www.oauth.com/oauth2-servers/pkce/" target="_blank" rel="noopener noreferrer">đây</a>. Sau khi cấu hình Đăng nhập, bạn cần:</p><ul class=""><li>Tạo một&nbsp;<strong>code verifier</strong>&nbsp;và lưu trữ trên hệ thống của bạn.</li><li>Dùng mã hóa&nbsp;<strong>code verifier</strong>&nbsp;bằng bộ ký tự&nbsp;<strong>ASCII</strong>, tiếp đến dùng giải thuật&nbsp;<strong>SHA-256</strong>&nbsp;để tạo mã băm, sau cùng encode&nbsp;<strong>Base64</strong>&nbsp;(without Padding) mã băm để tạo ra&nbsp;<strong>code challenge</strong>&nbsp;từ&nbsp;<strong>code verifier</strong>.</li><li>code_challenge = <code>Base64.encode(SHA-256.hash(ASCII(code_verifier)))</code></li></ul><p><strong>Lưu ý:</strong>&nbsp;</p><ul class=""><li>Yêu cầu sử dụng&nbsp;<strong>code verifier</strong>&nbsp;khác nhau cho từng request.</li><li><strong>Code verifier</strong>&nbsp;là 1 chuỗi bất kỳ, format có đủ chữ hoa, chữ thường, số và dài 43 ký tự.</li><li><strong>Code verifier</strong>&nbsp;là code dùng để xác minh quyền sở hữu của bạn với&nbsp;<strong>authorization code</strong>&nbsp;bạn nhận được từ hệ thống. Vui lòng không cung cấp code này cho bên thứ ba.</li><li>Hãy dùng biến state hoặc một param tự định nghĩa truyền vào&nbsp;redirect_uri&nbsp;ở bước 3 để xác định&nbsp;<strong>authorization code</strong>&nbsp;mà bạn nhận được ứng với&nbsp;<strong>code verifier</strong>&nbsp;nào.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bước-3-yêu-cầu-cấp-authorization-code">Bước 3: Yêu cầu cấp authorization code<a href="#bước-3-yêu-cầu-cấp-authorization-code" class="hash-link" aria-label="Đường dẫn trực tiếp tới Bước 3: Yêu cầu cấp authorization code" title="Đường dẫn trực tiếp tới Bước 3: Yêu cầu cấp authorization code">​</a></h3><p>Gửi đường dẫn dưới đây đến user để bắt đầu quá trình nhận&nbsp;<strong>authorization code</strong>.&nbsp;</p><ul class=""><li><strong>Web:</strong></li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">https://oauth.zaloapp.com/v4/permission?app_id=&lt;APP_ID&gt;&amp;redirect_uri=&lt;CALLBACK_URL&gt;&amp;code_challenge=&lt;CODE_CHALLENGE&gt;&amp;state=&lt;STATE&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="Chuyển đổi văn bản xuống dòng" title="Chuyển đổi văn bản xuống dòng"><svg class="wordWrapButtonIcon_Bwma" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Sao chép code vào bộ nhớ tạm" title="Sao chép" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Trong đó:&nbsp;<code>oauth.zaloapp.com/v4/permission</code>&nbsp; là API Authorization Endpoint với các tham số</p><table><tbody><tr><th><b>Tham số</b></th><th><b>Kiểu dữ liệu</b></th><th><b>Tính bắt buộc&nbsp;</b></th><th><b>Mô tả&nbsp;</b></th></tr><tr><td><span>app_id</span></td><td><span>long</span></td><td><span>yes</span></td><td><span>ID của ứng dụng.&nbsp;</span></td></tr><tr><td><span>redirect_uri</span></td><td><span>string</span></td><td><span>yes</span></td><td><span>Thông tin được cấu hình tại bước 1.</span></td></tr><tr><td><span>code_challenge&nbsp;</span></td><td><span>string</span></td><td><span>no</span></td><td><b>code challenge</b><span>&nbsp;được tạo từ&nbsp;</span><b>code verifier</b><span>&nbsp;với giải thuật SHA-256 tại bước 2.</span></td></tr><tr><td><span>state</span></td><td><span>string</span></td><td><span>yes</span></td><td><span>Dùng để chống CSRF. Được trả nguyên vẹn trong redirect_uri.</span></td></tr></tbody></table><ul class=""><li><strong>Android:</strong></li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">https://oauth.zaloapp.com/v4/permission?app_id=&lt;APP_ID&gt;&amp;pkg_name=&lt;PKG_NAME&gt;&amp;sign_key=&lt;SIGN_KEY&gt;&amp;code_challenge=&lt;CODE_CHALLENGE&gt;&amp;state=&lt;STATE&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="Chuyển đổi văn bản xuống dòng" title="Chuyển đổi văn bản xuống dòng"><svg class="wordWrapButtonIcon_Bwma" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Sao chép code vào bộ nhớ tạm" title="Sao chép" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Trong đó:&nbsp;oauth.zaloapp.com/v4/permission&nbsp; là API Authorization Endpoint với các tham số</p><table><tbody><tr><th><b>Tham số</b></th><th><b>Kiểu dữ liệu</b></th><th><b>Tính bắt buộc&nbsp;</b></th><th><b>Mô tả&nbsp;</b></th></tr><tr><td><span>app_id</span></td><td><span>long</span></td><td><span>yes</span></td><td><span>ID của ứng dụng.&nbsp;</span></td></tr><tr><td><span>pkg_name</span></td><td><span>string</span></td><td><span>yes</span></td><td><span>Thông tin được cấu hình tại bước 1.</span></td></tr><tr><td><span>sign_key&nbsp;</span></td><td><span>string</span></td><td><span>yes</span></td><td><span>Thông tin được cấu hình tại bước 1.</span></td></tr><tr><td><span>os</span></td><td><span>string</span></td><td><span>yes</span></td><td><span>Truyền vào giá trị:&nbsp;</span><b>1 </b>-<b>&nbsp;</b><span>Mục đích thông báo cho platform biết để check các trường được config cho login Android.</span></td></tr><tr><td><span>code_challenge&nbsp;</span></td><td><span>string</span></td><td><span>no</span></td><td><b>code challenge</b><span>&nbsp;được tạo từ&nbsp;</span><b>code verifier</b><span>&nbsp;với giải thuật SHA-256 tại bước 2.</span></td></tr><tr><td><span>state</span></td><td><span>string</span></td><td><span>yes</span></td><td><span>Dùng để chống CSRF. Được trả nguyên vẹn trong redirect_uri.</span></td></tr></tbody></table><ul class=""><li><strong>IOS:</strong></li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">https://oauth.zaloapp.com/v4/permission?app_id=&lt;APP_ID&gt;&amp;bndl_id=&lt;BNDL_ID&gt;&amp;code_challenge=&lt;CODE_CHALLENGE&gt;&amp;state=&lt;STATE&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="Chuyển đổi văn bản xuống dòng" title="Chuyển đổi văn bản xuống dòng"><svg class="wordWrapButtonIcon_Bwma" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Sao chép code vào bộ nhớ tạm" title="Sao chép" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Trong đó:&nbsp;oauth.zaloapp.com/v4/permission&nbsp; là API Authorization Endpoint với các tham số</p><table><tbody><tr><th><b>Tham số</b></th><th><b>Kiểu dữ liệu</b></th><th><b>Tính bắt buộc&nbsp;</b></th><th><b>Mô tả&nbsp;</b></th></tr><tr><td><span>app_id</span></td><td><span>long</span></td><td><span>yes</span></td><td><span>ID của ứng dụng.&nbsp;</span></td></tr><tr><td><span>bndl_id</span></td><td><span>string</span></td><td><span>yes</span></td><td><span>Thông tin được cấu hình tại bước 1.</span></td></tr><tr><td><span>os</span></td><td><span>string</span></td><td><span>yes</span></td><td><span>Truyền vào giá trị:&nbsp;</span><b>2</b><span>&nbsp;- Mục đích thông báo cho platform biết để check các trường đượ config cho login IOS.</span></td></tr><tr><td><span>code_challenge&nbsp;</span></td><td><span>string</span></td><td><span>no</span></td><td><b>code challenge</b><span>&nbsp;được tạo từ&nbsp;</span><b>code verifier</b><span>&nbsp;với giải thuật SHA-256 tại bước 2.</span></td></tr><tr><td><span>state</span></td><td><span>string</span></td><td><span>yes</span></td><td><span>Dùng để chống CSRF. Được trả nguyên vẹn trong redirect_uri.</span></td></tr></tbody></table><p>Đường dẫn sẽ mở trang cấp quyền cho ứng dụng, như sau: </p><img src="/docs/img/user_form.jpg" class="custom-image"><p>Tại đây, User sẽ chọn “Cho phép” để xác nhận gửi oauth code. Trình duyệt sẽ chuyển hướng và gửi&nbsp;<strong>oauth_code</strong>&nbsp;về callback URL đã được thiết lập trước đó (callback URL của bạn sẽ nhận được 1 HTTP get request có kèm&nbsp;<strong>oauth code</strong>). Ví dụ: callback URL của bạn là&nbsp;<a href="https://yourdomain.com/abc" target="_blank" rel="noopener noreferrer">https://yourdomain.com/abc</a>.&nbsp;HTTP get request sẽ gọi đến callback URL là:</p><p><a href="https://yourdomain.com/abc?code=" target="_blank" rel="noopener noreferrer">https://yourdomain.com/abc?code=</a>&lt;AUTHORIZATION_CODE&gt;&amp;state=xxxx&amp;code_challenge=xxxx</p><p>*Lưu ý:&nbsp;&nbsp;<strong>code</strong>&nbsp;sẽ có hiệu lực trong vòng 10 phút.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bước-4-gửi-api-để-lấy-user-access-token-từ-authorization-code">Bước 4: Gửi API để lấy user access token từ authorization code<a href="#bước-4-gửi-api-để-lấy-user-access-token-từ-authorization-code" class="hash-link" aria-label="Đường dẫn trực tiếp tới Bước 4: Gửi API để lấy user access token từ authorization code" title="Đường dẫn trực tiếp tới Bước 4: Gửi API để lấy user access token từ authorization code">​</a></h3><p>Sử dụng API sau để lấy&nbsp;<strong>access token</strong>&nbsp;từ&nbsp;<strong>authorization code</strong>&nbsp;mà bạn nhận được. </p><p><strong><em>HTTP request</em></strong></p><ul class=""><li><strong>URL:&nbsp;&nbsp;<a href="https://oauth.zaloapp.com/v4/access_token" target="_blank" rel="noopener noreferrer">https://oauth.zaloapp.com/v4/access_token</a></strong>&nbsp;</li><li><strong>Method:</strong>&nbsp;POST</li><li><strong>Content Type:</strong>&nbsp;application/x-www-form-urlencoded</li><li><strong>Response Type:</strong>&nbsp;&nbsp;json</li></ul><p><strong><em>Example request</em></strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token function" style="color: rgb(130, 170, 255);">curl</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(199, 146, 234);">\</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">-X POST </span><span class="token punctuation" style="color: rgb(199, 146, 234);">\</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">-H </span><span class="token string" style="color: rgb(195, 232, 141);">"Content-Type: application/x-www-form-urlencoded"</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(199, 146, 234);">\</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">-H </span><span class="token string" style="color: rgb(195, 232, 141);">"secret_key: &lt;your_secret_key&gt;"</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(199, 146, 234);">\</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">--data-urlencode </span><span class="token string" style="color: rgb(195, 232, 141);">'code=&lt;your_oauth_code&gt;'</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(199, 146, 234);">\</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">--data-urlencode </span><span class="token string" style="color: rgb(195, 232, 141);">'app_id=&lt;your_app_id&gt;'</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(199, 146, 234);">\</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">--data-urlencode </span><span class="token string" style="color: rgb(195, 232, 141);">'grant_type=authorization_code'</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(199, 146, 234);">\</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">--data-urlencode </span><span class="token string" style="color: rgb(195, 232, 141);">'code_verifier=your_code_verifier'</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(199, 146, 234);">\</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain"></span><span class="token string" style="color: rgb(195, 232, 141);">'https://oauth.zaloapp.com/v4/access_token'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="Chuyển đổi văn bản xuống dòng" title="Chuyển đổi văn bản xuống dòng"><svg class="wordWrapButtonIcon_Bwma" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Sao chép code vào bộ nhớ tạm" title="Sao chép" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong><em>Header</em></strong></p><table><tbody><tr><th><b>HeaderName</b></th><th><b>Kiểu dữ liệu</b></th><th><b>Tính bắt buộc</b></th><th><b>Mô tả</b></th></tr><tr><td><span>secret_key</span></td><td><span>string</span></td><td><span>yes&nbsp;</span></td><td><span>Khóa bí mật của ứng dụng (*). Xem hướng dẫn tại <a href="#hướng-dẫn-lấy-app-secret-key">đây</a></span></td></tr></tbody></table><p><strong><em>Body x-www-form-urlencoded</em></strong></p><table><tbody><tr><th><b>Key</b></th><th><b>Kiểu dữ liệu</b></th><th><b>Tính bắt buộc</b></th><th><b>Mô tả</b></th></tr><tr><td><span>code</span></td><td><span>string</span></td><td><span>yes</span></td><td><b>Authorization code</b><span>&nbsp;mà bạn nhận được ở bước 3</span></td></tr><tr><td><span>app_id</span></td><td><span>long</span></td><td><span>yes</span></td><td><span>ID của ứng dụng</span></td></tr><tr><td><span>grant_type&nbsp;</span></td><td><span>string</span></td><td><span>yes</span></td><td><span>Thuộc tính cho biết thông tin để tạo&nbsp;</span><b>access token</b><span>.&nbsp;</span><span>Giá trị truyền vào: authorization_code</span><span>đại diện cho việc tạo&nbsp;</span><b>access token</b><span>&nbsp;từ&nbsp;</span><b>authorization code</b><span>.</span></td></tr><tr><td><span>code_verifier</span></td><td><span>string</span></td><td><span>yes nếu ở bước lấy oauth code&nbsp;</span><b>có</b><span>&nbsp;truyền code challenge</span></td><td><b>Code verifier</b><span>&nbsp;được dùng để tạo&nbsp;</span><b>code challenge</b><span>&nbsp;ở bước 2.</span></td></tr></tbody></table><p><strong><em>Ví dụ:</em></strong> </p><img src="/docs/img/2021-09-29_14-16.png" class="custom-image"><p><strong><em>Example respond</em></strong></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token punctuation" style="color: rgb(199, 146, 234);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><span class="token property">"access_token"</span><span class="token operator" style="color: rgb(137, 221, 255);">:</span><span class="token plain"> </span><span class="token string" style="color: rgb(195, 232, 141);">"RfBh5NdqsWzhcX8bDDe_1A463Z34Fhy1GVi63AoTU1InwujqF"</span><span class="token punctuation" style="color: rgb(199, 146, 234);">,</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><span class="token property">"refresh_token"</span><span class="token operator" style="color: rgb(137, 221, 255);">:</span><span class="token string" style="color: rgb(195, 232, 141);">"L2Y2BO9Prn_I1SkM08T4J99bZQYVbOBPfTVeRgrLdPK4ZqGX9G"</span><span class="token punctuation" style="color: rgb(199, 146, 234);">,</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><span class="token property">"expires_in"</span><span class="token operator" style="color: rgb(137, 221, 255);">:</span><span class="token plain"> </span><span class="token string" style="color: rgb(195, 232, 141);">"3600"</span><span class="token punctuation" style="color: rgb(199, 146, 234);">,</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        "refresh_token_expires_in</span><span class="token operator" style="color: rgb(137, 221, 255);">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="Chuyển đổi văn bản xuống dòng" title="Chuyển đổi văn bản xuống dòng"><svg class="wordWrapButtonIcon_Bwma" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Sao chép code vào bộ nhớ tạm" title="Sao chép" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><tbody><tr><th><b>Thuộc tính</b></th><th><b>Kiểu dữ liệu</b></th><th><b>Mô tả</b></th></tr><tr><td><a href="/docs/v2/official-account/bat-dau/xac-thuc-va-uy-quyen-cho-ung-dung-new"><span>access_token</span></a></td><td><span>string</span></td><td><b>Access token&nbsp;</b><span>dùng để gọi các Official Account API</span><span> Hiệu lực: 1 giờ</span></td></tr><tr><td><span>refresh_token</span></td><td><span>string</span></td><td><span>Token được sử dụng để tạo lại&nbsp;</span><b>access token</b><span>&nbsp;khi&nbsp;</span><b>access token</b><span>&nbsp;hết hiệu lực.</span><span>Mỗi access token được tạo sẽ có một refresh token đi kèm.</span><span>Hiệu lực tối đa: 30&nbsp;ngày</span></td></tr><tr><td><span>expires_in</span></td><td><span>string</span></td><td><span>Thời hạn của&nbsp;</span><b>access token&nbsp;</b><span>(đơn vị tính: giây)</span></td></tr></tbody></table><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lấy-user-access-token-từ-refresh-token">Lấy user access token từ refresh token<a href="#lấy-user-access-token-từ-refresh-token" class="hash-link" aria-label="Đường dẫn trực tiếp tới Lấy user access token từ refresh token" title="Đường dẫn trực tiếp tới Lấy user access token từ refresh token">​</a></h2><p><strong><em>HTTP request</em></strong></p><ul class=""><li><strong>URL:</strong>&nbsp;&nbsp;<a href="https://oauth.zaloapp.com/v4/access_token" target="_blank" rel="noopener noreferrer">https://oauth.zaloapp.com/v4/access_token</a></li><li><strong>Method:</strong>&nbsp;POST</li><li><strong>Content Type:</strong>&nbsp;application/x-www-form-urlencoded</li><li><strong>Response Type:</strong>&nbsp; json</li></ul><p><strong><em>Example request</em></strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token function" style="color: rgb(130, 170, 255);">curl</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(199, 146, 234);">\</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">-X POST </span><span class="token punctuation" style="color: rgb(199, 146, 234);">\</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">-H </span><span class="token string" style="color: rgb(195, 232, 141);">"Content-Type: application/x-www-form-urlencoded"</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(199, 146, 234);">\</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">-H </span><span class="token string" style="color: rgb(195, 232, 141);">"secret_key: &lt;your_secret_key&gt;"</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(199, 146, 234);">\</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">--data-urlencode </span><span class="token string" style="color: rgb(195, 232, 141);">'refresh_token=&lt;your_refresh_token&gt;'</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(199, 146, 234);">\</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">--data-urlencode </span><span class="token string" style="color: rgb(195, 232, 141);">'app_id=&lt;your_app_id&gt;'</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(199, 146, 234);">\</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">--data-urlencode </span><span class="token string" style="color: rgb(195, 232, 141);">'grant_type=refresh_token'</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(199, 146, 234);">\</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain"></span><span class="token string" style="color: rgb(195, 232, 141);">'https://oauth.zaloapp.com/v4/access_token'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="Chuyển đổi văn bản xuống dòng" title="Chuyển đổi văn bản xuống dòng"><svg class="wordWrapButtonIcon_Bwma" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Sao chép code vào bộ nhớ tạm" title="Sao chép" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong><em>Header</em></strong></p><table><tbody><tr><th><b>HeaderName</b></th><th><b>Kiểu dữ liệu</b></th><th><b>Tính bắt buộc</b></th><th><b>Mô tả</b></th></tr><tr><td><span>secret_key</span></td><td><span>string</span></td><td><span>yes</span></td><td><span><span>Khóa bí mật của ứng dụng</span></span><span>&nbsp;(*). Xem hướng dẫn tại&nbsp;<a href="#hướng-dẫn-lấy-app-secret-key">đây</a></span></td></tr></tbody></table><p><strong><em>Body x-www-form-urlencode</em></strong></p><table><tbody><tr><th><b>Key</b></th><th><b>Kiểu dữ liệu</b></th><th><b>Tính bắt buộc</b></th><th><b>Mô tả</b></th></tr><tr><td><span>refresh_token</span></td><td><span>string</span></td><td><span>yes</span></td><td><b>Refresh token</b><span>&nbsp;dùng để tạo&nbsp;</span><b>access token</b><span>&nbsp;mới.</span></td></tr><tr><td><span>app_id</span></td><td><span>long</span></td><td><span>yes</span></td><td><span>ID của ứng dụng.</span></td></tr><tr><td><span>grant_type&nbsp;</span></td><td><span>string</span></td><td><span>yes</span></td><td><span>Thuộc tính cho biết thông tin để tạo&nbsp;</span><b>access token</b><span>.&nbsp;</span><span>Giá trị nhận vào: refresh_token</span><span>Đại diện cho việc 1tạo&nbsp;</span><b>access token</b><span>&nbsp;từ&nbsp;</span><b>refresh token</b><span>.</span></td></tr></tbody></table><p><strong><em>Ví dụ:</em></strong> </p><img src="/docs/img/2021-09-29_14-16_1.png" class="custom-image"><p> <strong><em>Example respond</em></strong></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token punctuation" style="color: rgb(199, 146, 234);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><span class="token property">"access_token"</span><span class="token operator" style="color: rgb(137, 221, 255);">:</span><span class="token string" style="color: rgb(195, 232, 141);">"E5sPAxHWmF9aYZeZzPczEcNRtdVIPCD3XyGXw1uLBZ3npsF-MUW"</span><span class="token punctuation" style="color: rgb(199, 146, 234);">,</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><span class="token property">"refresh_token"</span><span class="token operator" style="color: rgb(137, 221, 255);">:</span><span class="token plain"> </span><span class="token string" style="color: rgb(195, 232, 141);">"DCcFKjWctu458dAU2FRbaNRPCcQGZ34zCmUF9aYEcNRtdVIaq"</span><span class="token punctuation" style="color: rgb(199, 146, 234);">,</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><span class="token property">"expires_in"</span><span class="token operator" style="color: rgb(137, 221, 255);">:</span><span class="token plain"> </span><span class="token string" style="color: rgb(195, 232, 141);">"3600"</span><span class="token punctuation" style="color: rgb(199, 146, 234);">,</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        "refresh_token_expires_in</span><span class="token operator" style="color: rgb(137, 221, 255);">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(199, 146, 234);">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="Chuyển đổi văn bản xuống dòng" title="Chuyển đổi văn bản xuống dòng"><svg class="wordWrapButtonIcon_Bwma" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Sao chép code vào bộ nhớ tạm" title="Sao chép" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><tbody><tr><th><b>Thuộc tính</b></th><th><b>Kiểu dữ liệu</b></th><th><b>Mô tả</b></th></tr><tr><td><a href="/docs/v2/official-account/bat-dau/xac-thuc-va-uy-quyen-cho-ung-dung-new"><span>access_token</span></a></td><td><span>string</span></td><td><b>Access token&nbsp;</b><span>dùng để gọi các Official Account API</span><span>Hiệu lực: 1 giờ</span></td></tr><tr><td><span>refresh_token</span></td><td><span>string</span></td><td><span>Token được sử dụng để tạo lại&nbsp;</span><b>access token</b><span>&nbsp;khi&nbsp;</span><b>access token</b><span>&nbsp;hết hiệu lực.&nbsp;</span><span>Mỗi&nbsp;</span><b>access token</b><span>&nbsp;được tạo sẽ có một&nbsp;</span><b>refresh token</b><span>&nbsp;đi kèm.</span><span>Hiệu lực tối đa:&nbsp;30 ngày</span></td></tr><tr><td><span>expires_in</span></td><td><span>string</span></td><td><span>Thời hạn của&nbsp;</span><b>access token&nbsp;</b><span>(đơn vị tính: giây)</span></td></tr></tbody></table><p><strong>*Lưu ý:</strong>&nbsp;&nbsp;Trường hợp refresh token hết hạn, bạn cần thực hiện yêu cầu cấp lại authorization code và access token theo hướng dẫn tại bước 3 và 4.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="so-sánh-giữa-oauth-v2-và-oauth-v4"><strong>So sánh giữa oauth v2 và oauth v4</strong><a href="#so-sánh-giữa-oauth-v2-và-oauth-v4" class="hash-link" aria-label="Đường dẫn trực tiếp tới so-sánh-giữa-oauth-v2-và-oauth-v4" title="Đường dẫn trực tiếp tới so-sánh-giữa-oauth-v2-và-oauth-v4">​</a></h2><table><tbody><tr><th><b>Thực thể</b></th><th><b>Oauth V2</b></th><th><b>Oauth V4</b></th></tr><tr><td><span>OAuth Code</span></td><td><ul class=""><li><span>Hiệu lực:&nbsp;</span><b>3 tháng</b></li><li><span>Số lần được sử dụng để gọi lấy access token:&nbsp;</span><b>Vô hạn</b></li></ul></td><td><ul class=""><li><span>Hiệu lực:&nbsp;</span><b>10 phút</b></li><li><span>Số lần được sử dụng để gọi lấy access token:&nbsp;</span><b>1 lần</b></li></ul></td></tr><tr><td><span>Access Token</span></td><td><ul class=""><li><span>Hiệu lực: 1 tiếng</span></li><li><span>Khi hết hiệu lực, dùng&nbsp;</span><b>oauth code</b><span>&nbsp;để lấy access token mới</span></li></ul></td><td><ul class=""><li><span>Hiệu lực: 1 tiếng</span></li><li><span>Khi hết hiệu lực, dùng&nbsp;</span><b>refresh token</b><span>&nbsp;để lấy access token mới</span></li></ul></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hướng-dẫn-lấy-app-secret-key"><strong>Hướng dẫn lấy app secret key</strong><a href="#hướng-dẫn-lấy-app-secret-key" class="hash-link" aria-label="Đường dẫn trực tiếp tới hướng-dẫn-lấy-app-secret-key" title="Đường dẫn trực tiếp tới hướng-dẫn-lấy-app-secret-key">​</a></h2><p> <img loading="lazy" src="/docs/assets/images/secret_key_app-dee60137f015d8741aa9f01762215415.png" width="1389" height="640" class="img_ev3q"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Thanh điều hướng của trang tài liệu"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/v2/social-api/tham-khao/co-che-het-han-cua-user-refresh-token"><div class="pagination-nav__sublabel">Trước</div><div class="pagination-nav__label">Cơ chế hết hạn của User Refresh Token</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/v2/social-api/tham-khao/mot-so-luu-y-voi-user-access-token-v4"><div class="pagination-nav__sublabel">Kế tiếp</div><div class="pagination-nav__label">Một số lưu ý với User Access Token V4</div></a></nav></div></div>